<!-- wishlist/templates/wishlist/wishlist_list.html -->
{% extends 'base.html' %}

{% block content %}
    <form method="post" action="{% url 'wishlist-delete-multiple' username=request.user %}" id="deleteForm">
        {% csrf_token %}
        <div class="container mx-auto p-0 sm:p-4 md:p-8">
            <h1 class="text-3xl font-bold text-center mb-6">
                {% if wishlist_visibility == 'public' %}
                    {{ url_username|capfirst }}'s Public Wishlist
                {% elif wishlist_visibility == 'logged_in_users' and request.user.is_authenticated %}
                    {{ url_username|capfirst }}'s Wishlist (Visible to Logged In Users Only)
                {% elif wishlist_visibility == 'private' and can_edit %}
                    Your Private Wishlist
                {% else %}
                    <!-- Handle other visibility options or redirect to an error page -->
                    Access Denied
                {% endif %}
            </h1>
        </div>
        {% if wishlist_items %}
            {% include 'table_template.html' with items=wishlist_items editability=editability can_edit=can_edit checkbox_name='items_to_delete' model_type=model_type %}
        {% endif %}
    </div>

    {% if editability and can_edit %}
        <button type="submit" class="bg-red-500 text-white px-4 py-2 mt-4">Delete Selected</button>
    {% endif %}
</form>
{% endblock %}

{% block footer %}
{% if can_edit and request.user.is_authenticated %}
<div id="editabilityContainer" class="container w-8 md:w-32 lg:w-52 fixed bottom-0 right-0 bg-white p-2 border border-gray-300">
<form  method="post" action="{% url 'toggle-editability' username=request.user %}" id="editabilityForm">
    {% csrf_token %}
    <label class="inline-flex items-center justify-right">
        <input type="checkbox" id="editCheckbox" name="editability" class="form-checkbox" {% if editability %}checked{% endif %} onchange="document.getElementById('editabilityForm').submit();">
        {% if editability %}
        <span class="invisible sm:visible ml-2 text-red-500">Leave Edit Mode</span>
        {% else %}
        <span class="invisible sm:visible ml-2 text-green-500">Enter Edit Mode</span>
        {% endif %}
    </label>
</form>
{% endif %}
</div>
{% endblock %}

